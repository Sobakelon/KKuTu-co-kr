// KKUTU.CO.KR - KIM_DAEWOON

!function(){$(document).ready(function(){function a(a){if(g){var b=a.getAuthResponse(!0);console.log(b),$.post("/login/google",{it:b.id_token,at:b.access_token},c)}}function b(a){g&&alert(JSON.stringify(a))}function c(a){return a.error?alert("ERROR "+a.error):void d("/register")}function d(a){$.post("/session/set",{bm:$.cookie("bm")},function(b){$.cookie("prevpage",document.referrer),location.href=a})}var e,f=setInterval(function(){if(FB){try{FB.getLoginStatus(function(a){e=a})}catch(a){return}clearInterval(f)}},400),g=!1,h=setInterval(function(){gapi&&(gapi.signin2.render("with-google",{scope:"profile email https://www.googleapis.com/auth/plus.login",width:210,height:35,longtitle:!0,onsuccess:a,onfailure:b}),clearInterval(h))},400);$(".with-naver").on("click",function(a){var b="https://nid.naver.com/oauth2.0/authorize?";b+="response_type=code&",b+="client_id=cYoIkNBqhZ0VfPCaE2qq&",b+="redirect_uri="+encodeURI("http://kkutu.co.kr")+"&",b+="state="+encodeURI($("#stateKey").html())+"&",d(b)}),$(".with-facebook").on("click",function(a){return FB?e?void("connected"==e.status?d("/?token="+e.authResponse.accessToken):FB.login(function(a){a.authResponse?d("/?token="+a.authResponse.accessToken):history.back()})):(FB.getLoginStatus(function(a){e=a}),void alert("Please wait... (2)")):void alert("Please wait... (1)")}),$("#with-google").on("click",function(a){g=!0})})}();